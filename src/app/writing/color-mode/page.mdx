import { ColorModeCover } from "./ColorModeCover";
import { ColorModeToggleDemo } from "./ColorModeToggleDemo";
import { ContrastPicker } from "./ContrastPicker";

export const metadata = {
  date: "2025-10-15",
  description:
    "How I implemented an animated dark mode toggle using CSS with smooth color transitions and a fancy spherical animation."
};

<ColorModeCover />

# Animated Dark Mode Transition with CSS

For this website, I wanted to have a nice animation when switching between light and dark modes. You can check out the final result here:

<ColorModeToggleDemo showToggle isAnimated />

Unless I redesigned this site, you can also see the effect by clicking the small icon in the top-left corner - colors should quickly cross-fade, while the button itself does a little spherical animation.

In this post I will explain how I implemented the effect and the little icon animation using CSS & SVG.

<TableOfContents />

## Naming - Color Theme? Scheme? Mode?

First thing's first - how to name this feature? (Please skip ahead if you want to get to the technical details)

Should it be "color mode" or "color theme"? what is a "scheme" anyway? I believe naming things is very important, especially in code. When writing this post I decided to get to the bottom of this!

I found 3 commonly used names - Color Theme, Color Scheme and Color mode, as well as some less common options such as "UIUserInterfaceStyle.light/.dark;" (UIKit) or Flutter uses Brightness.light / Brightness.dark.

### Color Theme - the full design package

VS Code:
`"workbench.colorTheme": "Dark+ (default dark)"`

Material UI (MUI)
“palette mode” (light/dark) e.g. `theme.palette.mode='dark'`

Jetpack Compose (Android)
“light theme” / “dark theme” (Material 3 ColorScheme); use `isSystemInDarkTheme()` to pick light/dark

### Color Scheme - set of colors

Meaning: Typically refers to a structured set of colors chosen to work together harmoniously (background, foreground, accents). Rooted in design theory (“monochromatic scheme”, “analogous scheme”).

CSS uses `prefers-color-scheme: light | dark`

iOS / SwiftUI:
`ColorScheme.light`, `ColorScheme.dark`

### Color Mode - binary option

Meaning: Almost always refers to a binary or categorical setting (e.g., “Light mode” vs “Dark mode”). Less about aesthetics, more about state or preference.

Android:
Uses `UiModeManager` (`MODE_NIGHT_YES`, `MODE_NIGHT_NO`) and XML attribute android:theme.

Material UI (MUI):
`palette.mode = 'light' | 'dark'`

Chakra UI:
`colorMode = 'light' | 'dark'` and `useColorMode()` hook.

Tailwind CSS:
Uses `dark:` prefix (no explicit variable).
Config has `darkMode: 'media' | 'class'`.

## Setup

I will be focusing on the CSS implementation of the effect. The logic itself in React is mostly based on Josh Comeau's [Quest for the Perfect Dark Mode](https://www.joshwcomeau.com/react/dark-mode/) with some extra help from [Matt Stobbs's post](https://www.mattstobbs.com/elderjs-dark-mode/). You are free to take a look at the source code of this site as well if interested.

- Inline script tag - the key was to use \<script\> instead of nextjs \<Script\>, and put it in the head instead of the beginning of the body
- useColorMode Hook
- ColorModeToggle component

## Defining the Color Palette and Transition

When working in the web, I like to use CSS variables (a.k.a. [custom properties](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_cascading_variables/Using_CSS_custom_properties)) to define the color palette. The light colors are defined by default, while the dark versions of these colors are overridden under the `.dark` class selector:

```css
body {
  --foreground-color: #ddd;
  --background-color: #111;

  color: var(--foreground-color);
  background-color: var(--background-color);
}

body.dark {
  --foreground-color: #111;
  --background-color: #ddd;
}
```

When the `.dark` class is added or removed, the browser will automatically update all the elements using the variables we defined:

<ColorModeToggleDemo isAnimated={false}>
  Click to toggle `.dark` class:
</ColorModeToggleDemo>

To get a nice animation between the color modes, we can declare a transition for any property using the variables. In order to keep the timing consistent, I define a `--transition-defaults` variable which I can reuse:

```css
body {
  // ...
  --transition-defaults: 400ms ease-out;

  transition:
    background-color var(--transition-defaults),
    color var(--transition-defaults);
}
```

<ColorModeToggleDemo isAnimated={true}>
  Click to toggle `.dark` class:
</ColorModeToggleDemo>

## Using RGB, RGBA

that is a very nice way to ease the conversion of the UI to a different color theme

## Creating the Fancy Toggle

different toggles:

- Sun / moon
- Half circle
- Apple thing

The nice thing is that it sort of behaves like a toggle - with the white part moving from side to side
while the icon itself stays the same shape in negative

The idea is to have 2 halves
There is a hidden circle in the middle with scaleX(0), with each half being one color
On animating, the hidden inner circle is animated to a scale of scaleX(1), then the two halves are flipped, then the scale is animated back to scaleX(0)

<ColorModeToggleDemo showToggle isAnimated />
_Demo embed_ https://codepen.io/shamir/pen/YGbbNX

### The Setup

HTML button element

```html
<button class="ThemeToggle">
  <span class="ThemeToggle__half ThemeToggle__half--left"></span>
  <span class="ThemeToggle__half ThemeToggle__half--right"></span>
</button>
```

CSS

```css
.ThemeToggle {
  --size: 60px;
  --border-width: 2px;
}
```

### Animating the toggle

The animation is split into 4 parts:

1. The initial state
2. The first half of the animation
3. The second half of the animation
4. The final state

## Final touches - favicon

dynamic favicon
